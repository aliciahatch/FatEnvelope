/*
Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
!function(){function e(e){for(var n,a=e.getElementsByTag("*"),o=a.count(),r=0;o>r;r++)n=a.getItem(r),function(e){for(var n=0;n<t.length;n++)(function(t){var n=e.getAttribute("on"+t);e.hasAttribute("on"+t)&&(e.removeAttribute("on"+t),e.on(t,function(t){var a=/(return\s*)?CKEDITOR\.tools\.callFunction\(([^)]+)\)/.exec(n),o=a&&a[1],r=a&&a[2].split(","),i=/return false;/.test(n);if(r){for(var s,l=r.length,c=0;l>c;c++){r[c]=s=CKEDITOR.tools.trim(r[c]);var u=s.match(/^(["'])([^"']*?)\1$/);if(u)r[c]=u[2];else if(s.match(/\d+/))r[c]=parseInt(s,10);else switch(s){case"this":r[c]=e.$;break;case"event":r[c]=t.data.$;break;case"null":r[c]=null}}var d=CKEDITOR.tools.callFunction.apply(window,r);o&&d===!1&&(i=1)}i&&t.data.preventDefault()}))})(t[n])}(n)}var t=["click","keydown","mousedown","keypress","mouseover","mouseout"];CKEDITOR.plugins.add("adobeair",{init:function(t){CKEDITOR.env.air&&(t.addCss("body { padding: 8px }"),t.on("uiReady",function(){if(e(t.container),t.sharedSpaces)for(var n in t.sharedSpaces)e(t.sharedSpaces[n]);t.on("elementsPathUpdate",function(t){e(t.data.space)})}),t.on("contentDom",function(){t.document.on("click",function(e){e.data.preventDefault(!0)})}))}}),CKEDITOR.ui.on("ready",function(t){var n=t.data;if(n._.panel){var a,o=n._.panel._.panel;!function(){return o.isLoaded?(a=o._.holder,e(a),void 0):(setTimeout(arguments.callee,30),void 0)}()}else n instanceof CKEDITOR.dialog&&e(n._.element)})}(),CKEDITOR.dom.document.prototype.write=CKEDITOR.tools.override(CKEDITOR.dom.document.prototype.write,function(e){function t(e,t,n,a){var o=e.append(t),r=CKEDITOR.htmlParser.fragment.fromHtml(n).children[0].attributes;r&&o.setAttributes(r),a&&o.append(e.getDocument().createText(a))}return function(n){if(this.getBody()){var a=this,o=this.getHead();n=n.replace(/(<style[^>]*>)([\s\S]*?)<\/style>/gi,function(e,n,a){return t(o,"style",n,a),""}),n=n.replace(/<base\b[^>]*\/>/i,function(e){return t(o,"base",e),""}),n=n.replace(/<title>([\s\S]*)<\/title>/i,function(e,t){return a.$.title=t,""}),n=n.replace(/<head>([\s\S]*)<\/head>/i,function(e){var t=new CKEDITOR.dom.element("div",a);return t.setHtml(e),t.moveChildren(o),""}),n.replace(/(<body[^>]*>)([\s\S]*)(?=$|<\/body>)/i,function(e,t,n){a.getBody().setHtml(n);var o=CKEDITOR.htmlParser.fragment.fromHtml(t).children[0].attributes;o&&a.getBody().setAttributes(o)})}else e.apply(this,arguments)}});