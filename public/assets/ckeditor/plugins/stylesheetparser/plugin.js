/*
Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
!function(){function e(e,t,r){var s=e.join(" ");s=s.replace(/(,|>|\+|~)/g," "),s=s.replace(/\[[^\]]*/g,""),s=s.replace(/#[^\s]*/g,""),s=s.replace(/\:{1,2}[^\s]*/g,""),s=s.replace(/\s+/g," ");for(var n=s.split(" "),o=[],l=0;l<n.length;l++){var a=n[l];r.test(a)&&!t.test(a)&&-1==CKEDITOR.tools.indexOf(o,a)&&o.push(a)}return o}function t(t,r,s){var n,o=[],l=[];for(n=0;n<t.styleSheets.length;n++){var a=t.styleSheets[n],i=a.ownerNode||a.owningElement;if(!(i.getAttribute("data-cke-temp")||a.href&&"chrome://"==a.href.substr(0,9)))for(var c=a.cssRules||a.rules,u=0;u<c.length;u++)l.push(c[u].selectorText)}var f=e(l,r,s);for(n=0;n<f.length;n++){var h=f[n].split("."),g=h[0].toLowerCase(),p=h[1];o.push({name:g+"."+p,element:g,attributes:{"class":p}})}return o}CKEDITOR.plugins.add("stylesheetparser",{requires:["styles"],onLoad:function(){var e=CKEDITOR.editor.prototype;e.getStylesSet=CKEDITOR.tools.override(e.getStylesSet,function(e){return function(r){var s=this;e.call(this,function(e){var n=s.config.stylesheetParser_skipSelectors||/(^body\.|^\.)/i,o=s.config.stylesheetParser_validSelectors||/\w+\.\w+/;r(s._.stylesDefinitions=e.concat(t(s.document.$,n,o)))})}})}})}();